<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>预约与咨询 | 憩园</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- 基础样式 --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'SimSun', 'KaiTi', 'STKaiti', serif;
            background-color: #0a0a0a;
            color: #e4dccf;
            line-height: 1.8;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        /* 背景水墨动画 */
        .ink-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(26, 65, 48, 0.15) 2%, transparent 8%),
                radial-gradient(circle at 80% 70%, rgba(74, 54, 41, 0.1) 3%, transparent 7%);
            z-index: -2; opacity: 1; background-size: 200% 200%;
            animation: inkFlow 25s ease-in-out infinite alternate;
        }
        @keyframes inkFlow { 0% { background-position: 0% 0%; } 100% { background-position: 100% 100%; } }

        /* --- 核心：金色葫芦水印 --- */
        .gourd-watermark {
            position: fixed;
            bottom: -20px; right: 10px; width: 150px; height: 200px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 160'%3E%3Cpath fill='%23a89476' d='M50 10c-15 0-25 12-25 30 0 15 8 25 20 28-18 5-30 20-30 42 0 25 15 45 35 45s35-20 35-45c0-22-12-37-30-42 12-3 20-13 20-28C75 22 65 10 50 10zm0-10c5 0 8 5 5 10h-10c-3-5 0-10 5-10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-size: contain;
            opacity: 0.12;
            z-index: 9999;
            pointer-events: none;
            mix-blend-mode: screen;
        }

        /* --- 页码样式 --- */
        .page-number {
            position: fixed;
            bottom: 20px;
            right: 30px;
            color: #8a7f6e;
            font-size: 14px;
            font-family: 'Georgia', serif;
            letter-spacing: 2px;
            z-index: 10000;
            pointer-events: none;
            opacity: 0.6;
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 0 2rem; position: relative; z-index: 1; }

        /* 导航 */
        .main-nav { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem 0; border-bottom: 1px solid rgba(168, 148, 118, 0.3); margin-bottom: 4rem; }
        .nav-links { display: flex; }
        .nav-link { color: #a89476; text-decoration: none; margin-left: 3rem; font-size: 0.9rem; letter-spacing: 2px; position: relative; transition: color 0.3s ease; }
        .nav-link:hover, .nav-link.active { color: #e4dccf; }
        .nav-link.active::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 100%; height: 1px; background: #a89476; }
        .nav-link::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 1px; background: #a89476; transition: width 0.5s ease; }
        .nav-link:hover::after { width: 100%; }

        /* 搜索框 */
        .search-container { position: relative; width: 220px; }
        .search-box { width: 100%; padding: 0.5rem 2.5rem 0.5rem 1rem; background-color: rgba(26, 26, 26, 0.8); border: 1px solid rgba(168, 148, 118, 0.4); border-radius: 2px; color: #e4dccf; font-family: 'SimSun', 'STKaiti', serif; font-size: 0.9rem; letter-spacing: 1px; transition: all 0.3s ease; }
        .search-box:focus { outline: none; border-color: #a89476; box-shadow: 0 0 10px rgba(168, 148, 118, 0.2); }
        .search-icon { position: absolute; right: 0.8rem; top: 50%; transform: translateY(-50%); color: #a89476; cursor: pointer; transition: color 0.3s ease; }
        
        /* 页面主体 */
        .page-header { margin-bottom: 4rem; animation: fadeIn 1s ease; }
        .page-title { font-size: 3.5rem; font-weight: normal; color: #e4dccf; letter-spacing: 5px; margin-bottom: 1rem; }
        .page-subtitle { color: #8a7f6e; font-family: 'Georgia', serif; font-style: italic; font-size: 1.1rem; }

        .contact-grid { display: grid; grid-template-columns: 1fr 1.2fr; gap: 6rem; margin-bottom: 6rem; animation: slideUp 1s ease 0.2s backwards; }

        .info-section { border-right: 1px solid rgba(168, 148, 118, 0.1); padding-right: 4rem; }
        .info-block { margin-bottom: 3.5rem; }
        .info-label { display: block; font-size: 0.9rem; color: #a89476; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 1rem; }
        .info-content { font-size: 1.1rem; color: #e4dccf; line-height: 2; }
        .info-content a { color: #e4dccf; text-decoration: none; border-bottom: 1px solid rgba(228, 220, 207, 0.3); }
        
        .address-box { margin-top: 1rem; color: #e4dccf; font-family: 'SimSun', serif; line-height: 1.8; }
        .address-title { font-size: 1.2rem; margin-bottom: 0.5rem; color: #e4dccf; }
        .address-en { font-size: 0.9rem; color: #8a7f6e; font-family: 'Georgia', serif; margin-top: 0.2rem; }

        /* Tabs & Form */
        .form-tabs { display: flex; gap: 2rem; margin-bottom: 3rem; border-bottom: 1px solid rgba(168, 148, 118, 0.2); padding-bottom: 1rem; }
        .tab-btn { background: transparent; border: none; color: #8a7f6e; font-family: 'SimSun', serif; font-size: 1.1rem; letter-spacing: 2px; cursor: pointer; padding: 0.5rem 0; position: relative; transition: color 0.3s ease; }
        .tab-btn.active { color: #e4dccf; }
        .tab-btn.active::after { content: ''; position: absolute; bottom: -17px; left: 0; width: 100%; height: 2px; background: #a89476; }
        
        .form-group { margin-bottom: 2.5rem; position: relative; }
        .form-input, .form-textarea { width: 100%; background: transparent; border: none; border-bottom: 1px solid rgba(168, 148, 118, 0.3); padding: 1rem 0; color: #e4dccf; font-family: 'SimSun', 'STKaiti', serif; font-size: 1.1rem; transition: all 0.4s ease; border-radius: 0; }
        .form-input:focus, .form-textarea:focus { outline: none; border-bottom-color: #e4dccf; }
        .form-textarea { resize: none; height: 120px; }
        .form-label { position: absolute; top: 1rem; left: 0; color: #8a7f6e; pointer-events: none; transition: all 0.3s ease; letter-spacing: 1px; }
        .form-input:focus ~ .form-label, .form-input:not(:placeholder-shown) ~ .form-label, .form-textarea:focus ~ .form-label, .form-textarea:not(:placeholder-shown) ~ .form-label { top: -1.2rem; font-size: 0.8rem; color: #a89476; }

        .submit-btn { background: transparent; color: #e4dccf; border: 1px solid rgba(168, 148, 118, 0.4); padding: 1rem 3rem; font-family: 'SimSun', serif; font-size: 1rem; letter-spacing: 3px; cursor: pointer; transition: all 0.4s ease; margin-top: 1rem; }
        .submit-btn:hover { background: rgba(168, 148, 118, 0.1); border-color: #e4dccf; padding-left: 4rem; }

        /* 在线聊天入口卡片 */
        .chat-entrance { display: none; background: rgba(168, 148, 118, 0.05); border: 1px solid rgba(168, 148, 118, 0.2); padding: 3rem; text-align: center; animation: fadeIn 0.5s ease; }
        .chat-entrance.active { display: block; }
        .chat-icon { font-size: 3rem; color: #a89476; margin-bottom: 1.5rem; }
        .chat-desc { color: #8a7f6e; margin-bottom: 2rem; font-size: 1rem; }
        .chat-link-btn { display: inline-block; background: #a89476; color: #0a0a0a; padding: 1rem 3rem; text-decoration: none; letter-spacing: 2px; font-weight: bold; transition: all 0.3s; }
        .chat-link-btn:hover { background: #e4dccf; transform: scale(1.05); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .footer { text-align: center; padding: 3rem 0 1.5rem; color: #5a5244; font-size: 0.85rem; letter-spacing: 1px; border-top: 1px solid rgba(168, 148, 118, 0.2); }
        
        @media (max-width: 900px) {
            .contact-grid { grid-template-columns: 1fr; gap: 4rem; }
            .info-section { border-right: none; border-bottom: 1px solid rgba(168, 148, 118, 0.1); padding-right: 0; padding-bottom: 3rem; }
            .main-nav { flex-direction: column; align-items: flex-start; }
            .search-container { width: 100%; margin-bottom: 1.5rem; }
            .nav-links { width: 100%; justify-content: space-between; flex-wrap: wrap; }
            .nav-link { margin-left: 0; }
        }
    </style>
</head>
<body>
    <div class="ink-bg"></div>
    <div class="gourd-watermark"></div>

    <div class="page-number">8/39</div>

    <div class="container">
        <nav class="main-nav">
            <div class="search-container">
                <input type="text" class="search-box" placeholder="" id="navSearchInput">
                <div class="search-icon" id="navSearchBtn"><i class="fas fa-search"></i></div>
            </div>
            <div class="nav-links">
                <a href="home.html" class="nav-link">首页</a>
                <a href="collection.html" class="nav-link">藏品</a>
                <a href="philosophy.html" class="nav-link">憩园理念</a>
                <a href="appointment.html" class="nav-link active">预约咨询</a>
            </div>
        </nav>

        <header class="page-header">
            <h1 class="page-title">预约与咨询</h1>
            <p class="page-subtitle">Make an Appointment / Online Concierge</p>
        </header>

        <div class="contact-grid">
            <div class="info-section">
                <div class="info-block">
                    <span class="info-label">须知 / Policy</span>
                    <div class="info-content">
                        <p>憩园为私人藏馆，为确保静谧的观赏体验，我们实行<strong>完全预约制</strong>。</p>
                        <p>请至少提前三个工作日提交申请。</p>
                    </div>
                </div>
                <div class="info-block">
                    <span class="info-label">联络 / Contact</span>
                    <div class="info-content">
                        <p>邮箱：<a href="#">inquiry@qiyuan.art</a></p>
                        <p>电话：+86 10 0000 0000</p>
                    </div>
                </div>
                <div class="info-block">
                    <span class="info-label">地址 / Location</span>
                    <div class="address-box">
                        <p class="address-title">憩园 · QI YUAN</p>
                        <p>旧城厢青石路半山巷7号</p>
                        <p class="address-en">No.7, Banshan Lane, Qingshi Road, Jiuchengxiang</p>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="form-tabs">
                    <button class="tab-btn active" id="tabVisit" onclick="switchMode('visit')">预约到访 (Visit)</button>
                    <button class="tab-btn" id="tabOnline" onclick="switchMode('online')">线上咨询 (Chat)</button>
                </div>

                <form id="appointmentForm">
                    <div class="form-group">
                        <input type="text" class="form-input" id="name" placeholder=" " required>
                        <label for="name" class="form-label">姓名 / Name</label>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-input" id="email" placeholder=" " required>
                        <label for="email" class="form-label">电子邮箱 / Email</label>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-input" id="date" placeholder=" " onfocus="(this.type='date')" onblur="(this.type='text')">
                        <label for="date" class="form-label">预约日期 / Preferred Date</label>
                    </div>
                    <div class="form-group">
                        <textarea class="form-textarea" id="message" placeholder=" "></textarea>
                        <label for="message" class="form-label">到访事由或特殊需求 / Message</label>
                    </div>
                    <button type="submit" class="submit-btn">提交申请 &rarr;</button>
                </form>

                <div id="chatEntrance" class="chat-entrance">
                    <div class="chat-icon"><i class="fas fa-comments"></i></div>
                    <p class="chat-desc">
                        我们的数字顾问现已在线。<br>
                        无论您身在何处，都可以通过此加密通道与我们实时沟通。<br>
                        <span style="font-size: 0.9rem; color: #5a5244; margin-top: 1rem; display: block;">(支持藏品估值、鉴赏咨询及特殊行程安排)</span>
                    </p>
                    <a href="chat.html" class="chat-link-btn">进入咨询室 / Start Chat</a>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>憩园 · 仅供预约访客 | 地址不载于公共图册</p>
            <p>© 2015 Qiyuan. All Serenity Reserved.</p>
        </footer>
    </div>

    <script>
        function switchMode(mode) {
            const form = document.getElementById('appointmentForm');
            const chatDiv = document.getElementById('chatEntrance');
            const btnVisit = document.getElementById('tabVisit');
            const btnOnline = document.getElementById('tabOnline');

            if (mode === 'visit') {
                form.style.display = 'block';
                chatDiv.classList.remove('active');
                btnVisit.classList.add('active');
                btnOnline.classList.remove('active');
            } else {
                form.style.display = 'none';
                chatDiv.classList.add('active');
                btnVisit.classList.remove('active');
                btnOnline.classList.add('active');
            }
        }

        // --- 核心修改：统一跳转参数为 q ---
        const searchInput = document.getElementById('navSearchInput');
        const searchBtn = document.getElementById('navSearchBtn');
        function performRedirect() {
            const query = searchInput.value.trim();
            // 修改点：参数名从 keyword 修改为 q，确保 search.html 能立即捕捉并展示结果
            if (query) window.location.href = `search.html?q=${encodeURIComponent(query)}`;
        }
        searchBtn.addEventListener('click', performRedirect);
        searchInput.addEventListener('keypress', function(e) { if (e.key === 'Enter') performRedirect(); });

        // 提交模拟
        document.getElementById('appointmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = this.querySelector('.submit-btn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '提交中...'; btn.style.opacity = '0.7';
            setTimeout(() => {
                btn.innerHTML = '申请已发送'; btn.style.borderColor = '#2ecc71'; btn.style.color = '#2ecc71';
                setTimeout(() => {
                    btn.innerHTML = originalText; btn.style.borderColor = 'rgba(168, 148, 118, 0.4)';
                    btn.style.color = '#e4dccf'; btn.style.opacity = '1'; this.reset();
                }, 3000);
            }, 1500);
        });

        document.body.style.opacity = '0';
        document.body.style.transition = 'opacity 0.8s ease';
        window.onload = function() { document.body.style.opacity = '1'; };
    </script>
<script>
    (function() {
        const STORAGE_KEY = 'qiyuan_browsing_history';
        const pageInfo = {
            title: document.title || '未知页面', 
            url: window.location.href,
            time: new Date().toLocaleTimeString('zh-CN', {hour: '2-digit', minute:'2-digit'})
        };

        let history = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        
        // 防止瞬间重复刷新
        if (history.length === 0 || history[history.length - 1].url !== pageInfo.url) {
            history.push(pageInfo);
            
            // 【注意】这里不再限制数量了，有多少存多少
            // 只要硬盘（localStorage）没满，它就会一直记
            
            localStorage.setItem(STORAGE_KEY, JSON.stringify(history));
        }
    })();
</script>
</body>

</html>
